tinymce.PluginManager.add("gplink",function(a){a.addCommand("gp_Link",function(){window.gpLink&&window.gpLink.open(a.id)}),a.addShortcut("Alt+Shift+A","","gp_Link"),a.addShortcut("Meta+K","","gp_Link"),a.addButton("link",{icon:"link",tooltip:"Insert/edit link",cmd:"gp_Link",stateSelector:"a[href]"}),a.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink"}),a.addMenuItem("link",{icon:"link",text:"Insert link",cmd:"gp_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0}),a.on("pastepreprocess",function(b){var c=b.content;a.selection.isCollapsed()||(c=c.replace(/<[^>]+>/g,""),c=tinymce.trim(c),/^(?:https?:)?\/\/\S+$/i.test(c)&&(a.execCommand("mceInsertLink",!1,{href:a.dom.decode(c)}),b.preventDefault()))})});